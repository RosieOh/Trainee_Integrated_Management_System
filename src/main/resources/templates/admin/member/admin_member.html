<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{include/layout}">

<div layout:fragment="content">
  <div class="admin-content">
  <div class="admin_box">
    <h2>관리자</h2>
    <div class="table_group">
      <table class="table_set">
        <thead>
        <tr>
          <th>이름</th>
          <th>가입날짜</th>
          <th>클래스</th>
          <th>권한</th>
        </tr>
        </thead>
        <tbody>
        <th:block th:if="${#lists.isEmpty(memberList)}">
          <tr>
            <td colspan="4" class="board_td">
              <h4>현재 내용이 없습니다.</h4>
            </td>
          </tr>
        </th:block>
          <tr th:each="member, about :${memberList}">
            <td>
              <a th:href="@{/admin/member_read(no=${member.getNo() } )}">[[${member.name }]]  <i class='fas fa-sign-in-alt'></i> </a>
            </td>
            <td th:text="${#temporals.format(member.createdTime, 'yyyy-MM-dd')}"></td>
            <td>
              <form th:action="@{/admin/change_role(id=${member.id} )}" method="post" class="inline_form">
                <select name="role" class="select-box">
                  <option th:value="${member.course.no}" th:selected="${member.course.subject} != 'EXCEPTION'">[[${member.course.subject}]]</option>
                  <option value="1" th:selected="${member.course.subject} == 'EXCEPTION'">예외</option>
                </select>
                <button type="submit" class="inline_form_btn select_btn" >권한 변경 <i class="fas fa-pencil-alt"></i></button>
              </form>
            </td>
            <td>
              <form th:action="@{/admin/change_role(id=${member.id} )}" method="post" class="inline_form">
                <select name="role" class="select-box">
                  <option value="MANAGER" th:selected="${#strings.equals(member.role, 'MANAGER')}">매니저</option>
                  <option value="TEACHER" th:selected="${#strings.equals(member.role, 'TEACHER')}">선생님</option>
                  <option value="STUDENT" th:selected="${#strings.equals(member.role, 'STUDENT')}">학생</option>
                </select>
                <button type="submit" class="inline_form_btn select_btn" >권한 변경 <i class="fas fa-pencil-alt"></i></button>
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  </div>
</div>
